# Implementation Plan — SensorTelemetry

## 1. Краткое описание задачи
Разработать консольное приложение на языке C++, предназначенное для работы с данными телеметрии в формате JSON.  
Программа выполняет:

- Чтение JSON-файлов;
- Генерацию тестовых JSON-файлов (с ошибками и без ошибок);
- Валидацию данных;
- Вычисление статистических характеристик;
- Поиск аномалий с использованием скользящего окна;
- Вывод сводки и списка аномалий пользователю.

---

## 2. Цель и ожидаемый результат
Цель работы — освоить работу с файлами формата JSON в C++, методы парсинга, проверки и обработки структурированных данных, а также измерение производительности алгоритмов.  

Ожидаемый результат:

- Консольное приложение (.exe), которое:
  - Принимает JSON-файлы или генерирует их;
  - Валидирует данные (уникальность `ts`, корректность `value`);
  - Вычисляет min, max, среднее, медиану и анализирует скользящее окно;
  - Выводит отчёт с аномалиями и статистикой;
  - Измеряет время вычислений медианы и оконных метрик.

---

## 3. Этапы и задачи реализации

1. **Анализ формата входных данных**
   - Определение структуры JSON: массив объектов с полями `"sensor"`, `"ts"` и `"value"`.
   - Выделение обязательных полей и допустимых типов данных.

2. **Проектирование структуры программы**
   - Разделение кода на модули:
     - `src` — исходные файлы `.cpp`;
     - `include` — заголовочные файлы `.h/.hpp`;
     - `data` — тестовые JSON-файлы;
     - `docs` — документация и отчёты.
   - Определение функций: чтение файлов, генерация, валидация, анализ, вывод, измерение времени.

3. **Реализация генерации и проверки файлов**
   - Генерация JSON-файлов с корректными данными.
   - Генерация JSON-файлов с искусственными ошибками (пропуски, дубликаты `ts`, некорректные `value`).
   - Реализация проверки наличия файла и корректного формата JSON.

4. **Парсинг и преобразование данных**
   - Использование библиотеки [nlohmann/json](https://github.com/nlohmann/json) для преобразования JSON в объекты C++.
   - Чтение данных в контейнеры (например, `std::vector<double>` для `value`).

5. **Валидация данных**
   - Проверка наличия и типа полей `ts` и `value`.
   - Проверка уникальности временных меток (`ts`) через `std::set`.
   - Проверка корректного диапазона значений `value` (0–100).

6. **Вычисления и алгоритмы**
   - Вычисление min, max, среднего значения, медианы.
   - Реализация скользящего окна для поиска аномалий.
   - Опционально: оптимизация пересчёта оконных метрик (скользящая сумма).

7. **Вывод результатов пользователю**
   - Форматированная сводка по выбранному `sensor`.
   - Список обнаруженных аномалий.
   - Вывод времени вычислений (медиана и скользящее окно).

8. **Тестирование и исправление ошибок**
   - Проверка работы на различном количестве файлов: 100, 1000, 10000.
   - Использование как корректных, так и ошибочных JSON-файлов.
   - Сравнение замеров времени для различных размеров окон и количества данных.

9. **Оформление и подготовка итоговой версии**
   - Сборка исполняемого файла `.exe`.
   - Подготовка документации и Bench Report.
   - Размещение кода и данных в GitHub-репозитории согласно структуре.

---

## 4. План-график выполнения

| Этап | Срок выполнения (в днях) |
|------|--------------------------|
| 1. Анализ формата данных | 1–3 |
| 2. Проектирование структуры программы | 4–5 |
| 3. Реализация генерации и проверки файлов | 6–8 |
| 4. Парсинг и преобразование данных | 9–12 |
| 5. Валидация данных | 13–15 |
| 6. Вычисления и алгоритмы обработки | 16–20 |
| 7. Вывод результатов пользователю | 21–22 |
| 8. Тестирование и исправление ошибок | 23–27 |
| 9. Оформление и подготовка итоговой версии | 28–30 |

---

## 5. Ресурсы

- **Язык программирования:** C++ (стандарт C++17)  
- **Среда разработки:** Microsoft Visual Studio  
- **Библиотеки:** nlohmann/json  
- **Входные данные:** JSON-файлы с структурой `[{"sensor":"string","ts":"ISO8601","value":"number"}, ...]`  
- **Документация и материалы:**  
  - Официальная документация nlohmann/json  
  - Справочные материалы по стандартной библиотеке C++  
  - Методические указания к лабораторной работе  
