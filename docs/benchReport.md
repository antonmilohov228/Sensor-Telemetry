# Benchmarking Report — SensorTelemetry System

## 1. Объект исследования

Анализ производительности вычислительного ядра системы **SensorTelemetry** при выполнении статистической обработки и детекции аномалий. Цель — выявление «бутылочных горлышек» и оценка масштабируемости решения.

---

## 2. Методология тестирования

Исследование проводилось в два этапа для разделения затрат на вычисления и затрат на ввод-вывод (I/O):

### Сценарий А: Максимальная детализация 

* Активен режим отладки.
* Форматированный вывод всей статистики (min, max, avg, median) и списка найденных аномалий для каждого файла.
* Цель: оценка производительности в интерфейсном режиме.

### Сценарий Б: Оптимизированный поток 

* Минимальный лог (только статус обработки и время).
* Вычислительная нагрузка (парсинг JSON, медиана, окно) сохранена полностью.
* Цель: замер чистой производительности алгоритмов.

**Конфигурация теста:**

* **Окно анализа:** 20 отсчетов.
* **Нагрузка на файл:** 60–600 записей.
* **Среда:** x64 Release build, MSVC.

---

## 3. Результаты замеров

### 3.1. Производительность вычислительного ядра (Unit-тесты)

Замеры на уровне отдельных функций (в микросекундах, µs):

| Объем данных (записей) | Расчет медианы (µs) | Анализ окна (µs) |
| --- | --- | --- |
| 60 | 17 | 20 |
| 600 | 164 | 159 |

**Вывод:** алгоритмическая сложность на малых и средних объемах данных не оказывает критического влияния на общую задержку.

---

### 3.2. Сравнительный анализ масштабируемости

Сравнение времени обработки при росте количества входных файлов:

| Кол-во файлов | Время (Verbose), ms | Время (Silent), ms | Ускорение |
| --- | --- | --- | --- |
| 100 | 6 680 | 620 | **~10.7x** |
| 1 000 | 54 181 | 5 420 | **~10.0x** |
| 10 000 | 514 324 | 51 300 | **~10.0x** |

---

### 3.3. Прогноз производительности (Extrapolation)

На основе данных Silent Mode, при сохранении линейной сложности , ожидаемое время обработки сверхбольших массивов составит:

* **100 000 файлов:** ≈ 513 секунд (**~8.5 минут**).

---

## 4. Аналитический отчет

1. **Влияние I/O:** Подтверждено, что основным лимитирующим фактором является вывод в стандартный поток `stdout`. Задержки при записи в консоль на порядок (в 10 раз) превышают время на математическую обработку.
2. **Эффективность алгоритмов:** Вычисления медианы и скользящего окна показывают стабильную работу. При увеличении объема данных в 10 раз время выполнения растет пропорционально (линейно), что свидетельствует об отсутствии скрытых квадратичных зависимостей.
3. **Масштабируемость:** Программа готова к обработке промышленных объемов данных при условии минимизации логирования.

---

## 5. Заключение и рекомендации

* **Разделение режимов:** рекомендуется внедрить флаг запуска `--silent` для промышленной эксплуатации.
* **Файловый вывод:** для сохранения детальных отчетов следует использовать прямую запись в файл (`std::ofstream`), что значительно быстрее вывода в консоль.
* **Оптимизация:** при необходимости дальнейшего ускорения (для объемов > 1 млн файлов) целесообразно рассмотреть параллельную обработку файлов в разных потоках (`std::async`).
