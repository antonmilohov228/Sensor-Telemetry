# Bench Report — SensorTelemetry

## 1. Цель
Оценить производительность программы SensorTelemetry при вычислении медианы и поиске аномалий по скользящему окну, а также выявить основные факторы, влияющие на время выполнения.

---

## 2. Методика

Тестирование проводилось в два этапа:

### Этап 1 — полный вывод в консоль  
- Использовался встроенный Debug Mode программы  
- Для каждого JSON-файла выводилась полная статистика сенсора:
  - min / max / average / median
  - список аномалий
- Такой режим соответствует пользовательскому сценарию с подробным отчётом  

 **Важно:** интенсивный вывод в консоль существенно замедляет выполнение программы и искажает реальные вычислительные затраты.

### Этап 2 — минимальный вывод  
- Для каждого файла выводилось только:
  - имя файла
  - общее время обработки
- Алгоритмы анализа данных не изменялись  
- Данный режим ближе к реальной оценке производительности вычислений

**Параметры тестов:**
- Размер окна: 20 точек  
- Количество записей в файле: 60–600  
- Формат данных: JSON  
- Среда выполнения: Windows, Visual Studio, Release

---

## 3. Результаты

### 3.1 Микрозамеры (один файл)

| Кол-во записей | Медиана (µs) | Скользящее окно (µs) |
|----------------|--------------|----------------------|
| 60             | 17           | 20                   |
| 600            | 164          | 159                  |

Данные замеры показывают, что сами вычисления выполняются очень быстро и не являются основным узким местом.

---

### 3.2 Общие замеры — **полный вывод в консоль**

| Файлов проверено | Время анализа (ms) |
|------------------|--------------------|
| 100              | 6 680              |
| 1 000            | 54 181             |
| 10 000           | 514 324            |

**Особенность:**  
Основная часть времени тратится на форматированный вывод больших объёмов текста в консоль.

---

### 3.3 Общие замеры — **минимальный вывод**

| Файлов проверено | Время анализа (ms) |
|------------------|--------------------|
| 100              | 620                |
| 1 000            | 5 420              |
| 10 000           | 51 300             |

 **Ускорение ~9–10×** по сравнению с режимом полного вывода.

---

### 3.4 Расчётное время для 100 000 файлов (минимальный вывод)

Расчетное время для 100000

10 000 файлов → ~51 300 ms

100 000 файлов → ~513 000 ms ≈ 8.5 минут

## 4. Анализ

- Первоначальные бенчмарки были искажены из-за интенсивного вывода данных в консоль
- После сокращения вывода:
  - вычисления медианы и оконных метрик занимают пренебрежимо малую долю времени
  - производительность масштабируется **почти линейно**
- Алгоритмы анализа работают эффективно даже при увеличении размера входных данных


---

## 5. Вывод

- Реальное вычислительное ядро программы работает быстро и масштабируемо  
- Основная потеря производительности связана не с алгоритмами, а с пользовательским выводом  
- При минимальном выводе программа способна обрабатывать десятки тысяч файлов за разумное время  

**Рекомендации по оптимизации:**
- разделить режимы: «подробный отчёт» и «быстрый анализ»
- сохранять результаты в файл вместо вывода в консоль
