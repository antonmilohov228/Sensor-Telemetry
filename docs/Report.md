# Отчёт по лабораторной работе
**ФИО:** Шамбасов Александр Валерьевич 

**Группа:** ПРИ-0-25/1

**Тема:** Разработка консольного приложения для обработки JSON-данных сенсоров на C++


---

## 1. Краткое описание задачи и среды выполнения

**Задача:**  
Разработать консольное приложение на C++, которое считывает, валидирует и анализирует JSON-файлы с данными сенсоров. Программа выполняет статистические расчёты (min, max, среднее, медиана) и ищет аномалии по скользящему окну.  

**Среда выполнения:**  
- Операционная система: Windows 10
- IDE: Microsoft Visual Studio 2022  
- Компилятор: MSVC (C++17)  
- Библиотеки: nlohmann/json  

---

## 2. Структура проекта и схема данных

**Структура проекта:**

SensorTelemetry/

/src/ # исходный код .cpp

/include/ # заголовочные файлы .h/.hpp

/tests # самотесты

/docs/ # отчёт, план реализации, бенчмарки

/data/ # примеры JSON

/release/ # готовый .exe

.gitignore

README
---
**Мини-спецификация JSON:**

```json
[
  {
    "sensor": "s1",
    "ts": "2025-06-01T00:00:00Z",
    "value": 12.3
  },
  {
    "sensor": "s1",
    "ts": "2025-06-01T00:01:00Z",
    "value": 12.9
  }
]
```
sensor — имя сенсора

ts — временная метка в ISO 8601

value — числовое значение
---
## 3. Описание ключевых алгоритмов

Валидация данных: проверка наличия ts и value, диапазон значения value (0–100), уникальность ts.

Статистический анализ: вычисление min, max, среднего и медианы.

Аномалии по скользящему окну:

Для каждого окна из N точек вычисляется среднее.

Если текущая точка > 1.5×среднее или < 0.5×среднее, она считается аномальной.

Замер производительности: измеряется время вычисления медианы и оконных метрик.


---
## 4. Выдержки из интерфейсов функций и примеры использования

```cpp
json readJsonFile(const string& filename);
void validateData(const json& data);
void analyzeSensorData(const json& data, const string& sensorFilter, int windowSize, bool timecheck);
```
Пример использования:

```cpp
json data = readJsonFile("data_0.json");
validateData(data);
analyzeSensorData(data, "s1", 20, true);
```


## 5. Обработка ошибок и UX взаимодействие
---
Ошибка отсутствия файла: выводится сообщение "отсутсвует JSON отчет. Создайте JSON файл с названием: data_{number}.json в папке с программой."

Некорректное значение или дубликат ts: выводится сообщение с указанием проблемного значения.

UX: консольное меню с опциями:

Функции

Режим отладки

Выйти

---

## 6. Результаты тестов
---
Позитивные сценарии:
---
JSON-файл корректный → данные валидны, статистика и аномалии вычисляются корректно.

Негативные сценарии:
---
Пропуск ts → выводится предупреждение

Дублирование ts → выводится предупреждение

value вне диапазона → выводится предупреждение



## 7. Результаты бенчмарков

| Файлов проверено | Время анализа (мс) | Окно | Примечания                              |
| ---------------- | ------------------ | ---- | --------------------------------------- |
| 100              | 6680               | 20   | Линейная зависимость                    |
| 1000             | 54181              | 20   | Линейная зависимость                    |
| 10000            | 514324             | 20   | Прогноз для 100000: ~5 млн мс (~83 мин) |

Полный отчет "docs/benchReport.md"


## 8. Выводы и предложения по улучшению

Программа корректно работает с JSON, вычисляет статистику и находит аномалии.

Линейная зависимость времени анализа от количества файлов подтверждена.

Узкое место — пересчёт оконных метрик; для ускорения можно использовать оптимизацию:

скользящая сумма/среднее, вместо пересчёта каждого окна заново

многопоточность для анализа нескольких файлов одновременно

UX интуитивно понятен, сообщения об ошибках информативны.


Возможные улучшения в будущем
---
Расширенный UX – добавить возможность выбирать формат вывода (JSON, CSV) и фильтры по датам/сенсорам.

Многопоточность – параллельная обработка нескольких JSON-файлов для ускорения анализа больших объёмов данных.


